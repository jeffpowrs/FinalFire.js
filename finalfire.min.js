// -------------------------------------------------------------------------
//  Final Fire
//  Author: @jeff Powers
//  Git: github.com/jeffpowrs/finalfire.js
//  Date: 2013.11
//  License: MIT/GPLv2
// -------------------------------------------------------------------------

function FinalFire(a){this.config=$.extend({},true,{subEventArray:[],finalEvent:"complete",reset:false},a);this.wasTriggered={};this.subEventArrayLen=this.config.subEventArray.length;this.setAllTriggered(false,true)}FinalFire.prototype={bind:function(a){var b=this;$(this).on(a,function(c){b.wasTriggered[c.type]=true;if(b.wasAllTriggered(b)){b.emit(b)}})},setAllTriggered:function(c,d){var b="";for(var a=0;a<this.subEventArrayLen;a++){this.wasTriggered[this.config.subEventArray[a]]=c;if(d){b+=this.config.subEventArray[a]+" "}}if(d){this.bind(b)}},wasAllTriggered:function(b){for(var a=0;a<b.subEventArrayLen;a++){if(!b.wasTriggered[b.config.subEventArray[a]]){return false}if(a===b.subEventArrayLen-1){return true}}},emit:function(a){$(a).trigger(a.config.finalEvent);if(a.config.reset){a.setAllTriggered(false)}else{$(a).off(a.config.finalEvent)}}};